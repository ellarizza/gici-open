stream:
  streamers: 
    - streamer:
        tag: str_gnss_rov
        output_tags: [fmt_gnss_rov, fmt_gnss_eph]
        type: serial
        port: ttyACM0
        baudrate: 9600
    - streamer:
        tag: str_gnss_ref
        output_tags: [fmt_gnss_ref]
        type: ntrip-client
        ip: 153.121.59.53
        port: 2101
        username: gspase
        passward: gestiss
        mountpoint: ECJ27
    - streamer:
        tag: str_rtk_solution_file
        input_tags: [fmt_rtk_solution_file]
        type: file
        path: /workspace/output/real_time_rtk_solution.txt

  formators:
    - formator:
        io: input
        tag: fmt_gnss_rov
        type: gnss-raw
        sub_type: ublox
    - formator:
        io: input
        tag: fmt_gnss_ref
        type: gnss-raw
        sub_type: ublox
    - formator:
        io: input
        tag: fmt_gnss_eph
        type: gnss-raw
        sub_type: ublox
    - formator:
        io: output
        tag: fmt_rtk_solution_file
        type: nmea
        use_esa: true
        talked_id: GP
  replay:
    enable: false

estimate:
  - estimator:
      tag: est_rtk
      type: rtk
      input_tags: [fmt_gnss_rov, fmt_gnss_ref, fmt_gnss_eph]
      fmt_gnss_rov_roles: [rover]
      fmt_gnss_ref_roles: [reference]
      fmt_gnss_eph_roles: [ephemeris]
      output_tags: [fmt_rtk_solution_file]
      output_align_tag: fmt_gnss_rov
      compute_covariance: false
      rtk_options:
        max_window_length: 3
        use_ambiguity_resolution: true
        estimate_velocity: true
      gnss_estimator_base_options:
        gnss_common:
          min_elevation: 15.0
          min_SNR: [35.0, 30.0]
          system_exclude: [R,E,C]
        use_outlier_rejection: true
        max_pesudorange_error: 4.0        
        max_phaserange_error: 0.06         
        max_doppler_error: 0.5
      estimator_base_options:
        max_iteration: 5
        num_threads: 2
        max_solver_time: 0.02
        verbose_output: false
        solver_type: dense_schur
        trust_region_strategy_type: dogleg
      ambiguity_resolution_options:
        system_exclude: [R]
        min_percentage_fixation_uwl: 1.0
        min_percentage_fixation_wl: 0.9
        min_percentage_fixation_nl: 0.9
        ratio: 2.0


logging:
  enable: true
  min_log_level: 0
  log_to_stderr: false
  file_directory: /workspace/logs/